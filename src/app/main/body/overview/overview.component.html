<main>
    <section class="animate__animated animate__fadeIn animate__slower">
        <h1>
            Weekly Overview
            <span class="overview-date">
                ({{ weekStartDate | date: 'MMM d, y' }} - {{ weekEndDate | date: 'MMM d, y' }})
            </span>
        </h1>
    </section>

    <section class="top-section animate__animated animate__fadeIn">
        <div class="top-info-card-row">
            <div class="top-info-card">
                <div class="info-label">Project ID</div>
                <div class="info-value">{{ ProjectOverview?.project?.awardNumber }}</div>
            </div>
            <div class="top-info-card">
                <div class="info-label">Project Title</div>
                <div class="info-value">{{ ProjectOverview?.project?.title }}</div>
            </div>
            <div class="top-info-card">
                <div class="info-label">Company Name</div>
                <div class="info-value">{{ ProjectOverview?.project?.company }}</div>
            </div>
            <div class="top-info-card">
                <div class="info-label">Agency</div>
                <div class="info-value">{{ ProjectOverview?.project?.agency }}</div>
            </div>
        </div>

        <div class="top-info-card-row">
            <div class="top-info-card">
                <div class="info-label">Category</div>
                <div class="info-value">{{ ProjectOverview?.project?.category }}</div>
            </div>
            <div class="top-info-card">
                <div class="info-label">State</div>
                <div class="info-value">{{ ProjectOverview?.project?.state }}</div>
            </div>
            <div class="top-info-card">
                <div class="info-label">Project Status</div>
                <div class="info-value">{{ ProjectOverview?.project?.projectStatus }}</div>
            </div>
        </div>

        <div class="top-info-card-row">
            <div class="top-info-card">
                <div class="info-label">Approved Budget</div>
                <div class="info-value">{{ ProjectOverview?.project?.totalApprovedBudget | currency }}</div>
            </div>
            <div class="top-info-card">
                <div class="info-label">Disbursed Budget</div>
                <div class="info-value">{{ ProjectOverview?.project?.totalDisbursedBudget | currency }}</div>
            </div>
            <div class="top-info-card">
                <div class="info-label">Remaining Budget</div>
                <div class="info-value">{{ ProjectOverview?.project?.totalRemainingBudget | currency }}</div>
            </div>
        </div>

        <div class="top-info-card-row">
            <div class="top-info-card">
                <div class="info-label">Start Date</div>
                <div class="info-value">{{ ProjectOverview?.project?.startDate | date: 'MMM d, y' }}</div>
            </div>

            <div class="top-info-card">
                <div class="info-label">End Date</div>
                <div class="info-value">{{ ProjectOverview?.project?.endDate | date: 'MMM d, y' }}</div>
            </div>

            <div class="top-info-card">
                <div class="info-label">Project Manager</div>
                <div class="info-value">{{ ProjectOverview?.project?.projectManagerName }}</div>
            </div>

            <div class="top-info-card">
                <div class="info-label">Subcontractor</div>
                <div class="info-value">{{ ProjectOverview?.project?.subContractorName }}</div>
            </div>
        </div>
    </section>

    <section class="bottom-cards-section">

        <section class="bottom-cards-section-left">
            <section class="tasks-report-section animate__animated animate__fadeInLeft">
                <header>
                    Tasks Report
                    <!-- <br> -->
                    <small style="display: block;">(Overall project)</small>
                </header>
                <div class="tasks-report-section-content-container">
                    <div class="tasks-count-container">
                        <div class="task-count">{{ ProjectOverview?.toDoTasks }}</div>
                        <div class="task-label">To-do Tasks</div>
                    </div>
                    <div class="tasks-count-container">
                        <div class="task-count">{{ ProjectOverview?.completedTasks }}</div>
                        <div class="task-label">Completed Tasks</div>
                    </div>
                    <div class="tasks-count-container">
                        <div class="task-count">{{ ProjectOverview?.remainingTasks }}</div>
                        <div class="task-label">Remaining</div>
                    </div>
                </div>
                <footer>
                    <p-progressbar [value]="ProjectOverview?.progressPercentage" styleClass="custom-progress" />
                </footer>
            </section>

            <section class="project-notifications-section animate__animated animate__fadeInUp">
                <header>
                    <i class="pi pi-bell"></i>Project Notification
                </header>

                <div class="notifications-container">
                    <div class="notification-container" *ngFor="let notification of ProjectOverview?.notifications">
                        <i class="pi pi-caret-right"></i>
                        <p>{{ notification.title}} in {{notification.timeRemaining}}</p>
                    </div>
                </div>

                <!-- <footer>
                    <small>See more</small>
                </footer> -->
            </section>
        </section>
    </section>

    <section class="status-description-section animate__animated animate__fadeInUp">
        <header class="flex items-center justify-between">
            <span>Status</span>
            <button *ngIf="!isEditing" (click)="enableEdit()" class="icon-btn" style="cursor: pointer;">
                <i class="pi pi-pencil"></i>
            </button>
            <button *ngIf="isEditing" (click)="saveStatusDescription()" class="icon-btn" style="cursor: pointer;"
                [disabled]="isSaving">
                <i class="pi pi-check"></i>
                <i class="pi pi-spinner" *ngIf="isSaving"></i>
            </button>
        </header>

        <div class="description-text">
            <span *ngIf="!isEditing">{{ ProjectOverview?.project?.status }}</span>
            <input *ngIf="isEditing" [(ngModel)]="editableStatus" type="text" class="editable-input"
                [disabled]="isSaving" />
        </div>
    </section>


</main>